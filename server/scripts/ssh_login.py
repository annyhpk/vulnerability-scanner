import paramiko
from paramiko import SSHClient, AutoAddPolicy
import time
import sys

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(AutoAddPolicy())

def main():

    server = sys.argv[1]
    user = sys.argv[2]
    passwords = sys.argv[3]
    passwords = [val.strip() for val in passwords.split(',')]

    for psword in passwords:
        try:
            idx = ssh.connect(server, port=22, username=user,password=psword)
        except:
            idx = 0

        if idx is None:
            print('Success', user, psword)
            break
        else:
            print('Fail', user, psword)

        ssh.close()

if __name__ == "__main__":
    main()
