import paramiko
import time
import sys

cli = paramiko.SSHClient()
cli.set_missing_host_key_policy(paramiko.AutoAddPolicy)

server = sys.argv[1]
user = sys.argv[2]
pwd = sys.argv[3]
command = sys.argv[4]

cli.connect(server, port=22, username=user, password=pwd)
# 서버에 새로운 interactive shell session 생성하고 채널을 리턴.
#클라이언트는 이 채널을 통해 계속 명령을 송신하고 결과를 수신함
#새로운 쉘이 생성되어 화면에 표시됨
channel = cli.invoke_shell()
# 채널에 명령 송신
channel.send(command + "\n")
time.sleep(12)
# 결과 수신
output = channel.recv(65535).decode("utf-8") # 65535: 수신받는 최대 바이트 수.
#리턴되는 바이트스트림을 UTF-8로 디코딩함
print(output)
cli.close()
